<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OTUS CPP HOMEWORKS: Задание 12</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OTUS CPP HOMEWORKS<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Homeworks for the Otus Cpp Proffesional online course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Задание 12 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Цель – разработать систему запуска задач MapReduce. Не предполагается запуск внешних задач для отображения (map) и свёртки (reduce) (т. е. на вход принимаем только C++ функции или функторы, не нужно реализовывать запуск внешних скриптов).</p>
<p>На вход подаётся тестовый файл F, в котором каждая строка содержит адрес электронной почты. Для дальнейшей обработки не имеет значения, что именно содержат строки – самое важное, что обработка выполняется построчно. В качестве дополнительных параметров также указывается количество потоков для запуска функций отображения (M) и свертки (R) соответственно.</p>
<p>На первом этапе необходимо выполнить разделение исходного файла на секции по числу потоков отображения M. При этом нужно следить, чтобы границы секций были выровнены по строке. То есть, каждая секция заканчивалась целой строкой и начиналась с начала новой строки. Таким образом мы не допустим, чтобы один из email-адресов оказался на ранице секции и частично попал в две секции сразу. Чтение файла на этом этапе недопустимо, за исключением минимально возможного для выравнивания по строке.</p>
<p>На этапе работы отображения (map) следует запустить M потоков, каждый из которых обрабатывает свою секцию, полученную после разделения (split) исходного файла. Задача потока – построчно считать свою секцию и каждую строчку отправить в пользовательский функциональный объект. Результатом работы такого объекта будет новый список строк для стадии свертки (reduce). Полученные списки накапливаются в контейнере и затем сортируются. Для каждой секции получаем свой контейнер с отсортированными результатами.</p>
<p>Как только все потоки отображения будут завершены, необходимо запустить операцию смешивания (shuffle) и приготовить R контейнеров для будущей свертки. Общая задача на этапе смешивания – переместить строки из M контейнеров (результат этапа map) в R контейнеров (входные данные для этапа reduce). При этом сделать это нужно таким бразом, чтобы одинаковые данные попали в один и тот же контейнер для свёртки. Важно, чтобы контейнеры для свёртки остались отсортированными. Необходимо понять, как реализовать объединение отсортированных последовательностей.</p>
<p>Как только shuffle будет завершён, должны будут запуститься R потоков для свертки (reduce). Каждый поток построчно отправляет данные из контейнера в пользовательский функциональный объект. Результатом работы такого объекта будет список строк, который должен быть сохранен в файл без какой-либо дальнейшей обработки. К моменту завершения работы всех потоков свертки в файловой системе должны сформироваться R файлов с результатами.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Требования к реализации</h1>
<p>Результатом работы должна стать система запуска задач MapReduce. С помощью этой системы нужно решить задачу определения минимально возможного префикса, однозначно идентифицирующего строку. Для этого потребуется написать два функциональных объекта – для отображения (map) и свертки (reduce).</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Порядок запуска:</h1>
<div class="fragment"><div class="line">mapreduce &lt;src&gt; &lt;mnum&gt; &lt;rnum&gt;</div>
</div><!-- fragment --><p>где:</p><ul>
<li>src – путь к файлу с исходными данными</li>
<li>mnum – количество потоков для работы отображения</li>
<li>runm – количество потоков для работы свертки</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Проверка</h1>
<p>Задание считается выполненным успешно, если после установки пакета и запуска с тестовыми данными вывод соответствует ожидаемому. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
